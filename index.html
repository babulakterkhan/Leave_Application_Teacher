<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¶õ‡ßÅ‡¶ü‡¶ø‡¶∞ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶™‡¶§‡ßç‡¶∞</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;font-family:'Noto Sans Bengali',Arial,sans-serif}
.header{text-align:center;margin-bottom:30px;color:white}
.header h1{font-size:28px;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}
.container{display:flex;gap:20px;max-width:1300px;margin:0 auto;flex-wrap:wrap;justify-content:center}
.form-card,.output-card{flex:1;min-width:300px;max-width:500px;background:white;border-radius:15px;padding:20px;box-shadow:0 10px 40px rgba(0,0,0,0.2)}
.form-card h2,.output-card h2{color:#4a5568;margin-bottom:15px;padding-bottom:10px;border-bottom:2px solid #e2e8f0;font-size:18px}
.form-group{margin-bottom:12px}
.form-group label{display:block;margin-bottom:5px;color:#4a5568;font-weight:500}
.form-group input,.form-group select,.form-group textarea{width:100%;padding:10px;border:2px solid #e2e8f0;border-radius:8px;font-size:15px;outline:none}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{border-color:#667eea}
.leave-duration{display:flex;gap:10px;margin-bottom:12px;padding:10px;background:#f8f9fa;border-radius:8px}
.leave-duration label{display:flex;align-items:center;gap:5px;cursor:pointer;padding:8px 15px;border-radius:6px;border:2px solid transparent}
.leave-duration input{width:16px;height:16px;cursor:pointer}
.date-group{display:flex;gap:8px}
.date-group .form-group{flex:1}
.btn-group{display:flex;gap:8px;margin-top:15px}
.btn-primary{flex:1;padding:12px;background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer}
.btn-reset{padding:12px 15px;background:#e2e8f0;color:#4a5568;border:none;border-radius:8px;font-weight:600;cursor:pointer}
.backup-section{background:#fff3cd;padding:12px;border-radius:8px;margin-top:12px;border:1px solid #ffc107}
.backup-section h3{color:#856404;font-size:13px;margin-bottom:8px}
.backup-buttons{display:flex;gap:8px;flex-wrap:wrap}
.btn-backup,.btn-restore,.btn-clear-backup{flex:1;padding:8px;background:linear-gradient(135deg,#f39c12,#e67e22);color:white;border:none;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer}
.btn-restore{background:linear-gradient(135deg,#3498db,#2980b9)}
.btn-clear-backup{flex:0;padding:8px 12px;background:#e74c3c}
.backup-status{font-size:11px;color:#856404;margin-top:6px}
.saved-apps-section{background:#e8f5e9;padding:12px;border-radius:8px;margin-top:12px;border:1px solid #4caf50}
.saved-apps-section h3{color:#2e7d32;font-size:13px;margin-bottom:8px}
.save-app-btn{width:100%;padding:10px;background:linear-gradient(135deg,#4caf50,#2e7d32);color:white;border:none;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;margin-bottom:8px}
.saved-apps-list{max-height:150px;overflow-y:auto;border:1px solid #c8e6c9;border-radius:6px;margin-bottom:8px}
.saved-app-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px solid #e8f5e9;background:white}
.saved-app-item:last-child{border-bottom:none}
.saved-app-info{flex:1}
.saved-app-name{font-weight:600;color:#333;font-size:13px}
.saved-app-date{font-size:10px;color:#666}
.saved-app-actions{display:flex;gap:4px}
.btn-load-app,.btn-delete-app{padding:4px 8px;border:none;border-radius:4px;font-size:10px;cursor:pointer}
.btn-load-app{background:#2196f3;color:white}
.btn-delete-app{background:#f44336;color:white}
.export-import-btns{display:flex;gap:8px}
.btn-export,.btn-import{flex:1;padding:8px;border:none;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer;color:white}
.btn-export{background:linear-gradient(135deg,#9c27b0,#7b1fa2)}
.btn-import{background:linear-gradient(135deg,#ff5722,#e64a19)}
.no-saved-apps{padding:15px;text-align:center;color:#666;font-size:12px}
.app-counter{font-size:11px;color:#2e7d32;margin-bottom:8px}
.btn-print{padding:10px 20px;background:linear-gradient(135deg,#11998e,#38ef7d);color:white;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer}
.output-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:8px;border-bottom:2px solid #e2e8f0}
.application-letter{padding:var(--margin-size,20px);border:1px solid #e2e8f0;border-radius:8px;line-height:var(--line-height,2);font-size:var(--font-size,16px)}
.margin-control{background:#f8f9fa;padding:12px;border-radius:8px;margin-bottom:12px}
.margin-control label{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;color:#4a5568;font-weight:500}
.margin-slider,.lineheight-slider,.fontsize-slider{width:100%;height:6px;border-radius:3px;background:linear-gradient(to right,#e2e8f0,#667eea);outline:none;-webkit-appearance:none;cursor:pointer}
.margin-slider::-webkit-slider-thumb,.lineheight-slider::-webkit-slider-thumb,.fontsize-slider::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);cursor:pointer}
.margin-value,.lineheight-value,.fontsize-value{background:#667eea;color:white;padding:3px 10px;border-radius:15px;font-size:12px;font-weight:600}
.lineheight-value{background:#11998e}
.fontsize-value{background:#e74c3c}
.lineheight-slider{background:linear-gradient(to right,#e2e8f0,#11998e)}
.lineheight-slider::-webkit-slider-thumb{background:linear-gradient(135deg,#11998e,#38ef7d)}
.fontsize-slider{background:linear-gradient(to right,#e2e8f0,#e74c3c)}
.fontsize-slider::-webkit-slider-thumb{background:linear-gradient(135deg,#e74c3c,#c0392b)}
.letter-date{text-align:right;margin-bottom:12px}
.letter-subject{margin-bottom:12px}
.letter-body{text-indent:35px;text-align:justify;margin-bottom:12px}
.letter-signature{text-align:right;margin-top:35px}
.office-use{margin-top:35px;padding-top:15px;border-top:1px dashed #ccc}
.office-use-fields{display:flex;gap:15px;flex-wrap:wrap}
.placeholder{background:white;border-radius:15px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,0.2);text-align:center;color:#718096}
.placeholder-icon{font-size:50px;margin-bottom:15px}
.footer{text-align:center;margin-top:25px;color:white;opacity:0.8;font-size:13px}
.hidden{display:none!important}
.toast{position:fixed;bottom:15px;left:50%;transform:translateX(-50%);padding:10px 20px;border-radius:8px;color:white;font-weight:600;z-index:9999;animation:fadeInOut 3s}
.toast-success{background:linear-gradient(135deg,#27ae60,#2ecc71)}
.toast-error{background:linear-gradient(135deg,#e74c3c,#c0392b)}
@keyframes fadeInOut{0%{opacity:0;transform:translateX(-50%) translateY(15px)}15%{opacity:1;transform:translateX(-50)}85%{opacity:1}100%{opacity:0;transform:translateX(-50%) translateY(-15px)}}
@media print{body{background:white;padding:0}.form-card,.header,.footer,.no-print,.output-header,.margin-control{display:none!important}.output-card{box-shadow:none;border:none;max-width:100%;padding:0}.application-letter{border:none}@page{margin:10mm;size:A4}}
@media (max-width:768px){.container{flex-direction:column}.form-card,.output-card{max-width:100%}.date-group{flex-direction:column}.leave-duration{flex-direction:column;gap:5px}}
</style>
</head>
<body>
<div class="header"><h1>‡¶õ‡ßÅ‡¶ü‡¶ø‡¶∞ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶™‡¶§‡ßç‡¶∞ ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü‡¶∞</h1></div>
<div class="container">
<div class="form-card">
<h2>üìù ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
<form id="leaveForm">
<div class="form-group"><label>‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ *</label><input type="text" id="applicantName" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required></div>
<div class="form-group"><label>‡¶™‡¶¶‡¶¨‡ßÄ *</label><input type="text" id="designation" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∏‡¶π‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï" required></div>
<div class="form-group"><label>‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó/‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º</label><input type="text" id="department" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ó‡¶£‡¶ø‡¶§"></div>
<div class="form-group"><label>‡¶õ‡ßÅ‡¶ü‡¶ø‡¶∞ ‡¶ß‡¶∞‡¶® *</label><select id="leaveType" required>
<option value="‡¶¨‡ßá‡¶§‡¶®‡¶π‡ßÄ‡¶® ‡¶õ‡ßÅ‡¶ü‡¶ø">‡¶¨‡ßá‡¶§‡¶®‡¶π‡ßÄ‡¶® ‡¶õ‡ßÅ‡¶ü‡¶ø</option>
<option value="‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï ‡¶õ‡ßÅ‡¶ü‡¶ø">‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï ‡¶õ‡ßÅ‡¶ü‡¶ø</option>
<option value="‡¶Ö‡¶∏‡ßÅ‡¶∏‡ßç‡¶•‡¶§‡¶æ‡¶∞ ‡¶õ‡ßÅ‡¶ü‡¶ø">‡¶Ö‡¶∏‡ßÅ‡¶∏‡ßç‡¶•‡¶§‡¶æ‡¶∞ ‡¶õ‡ßÅ‡¶ü‡¶ø</option>
<option value="‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶õ‡ßÅ‡¶ü‡¶ø">‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶õ‡ßÅ‡¶ü‡¶ø</option>
<option value="‡¶Æ‡¶æ‡¶§‡ßÉ‡¶§‡ßç‡¶¨‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶õ‡ßÅ‡¶ü‡¶ø">‡¶Æ‡¶æ‡¶§‡ßÉ‡¶§‡ßç‡¶¨‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶õ‡ßÅ‡¶ü‡¶ø</option>
<option value="‡¶õ‡ßÅ‡¶ü‡¶ø">‡¶õ‡ßÅ‡¶ü‡¶ø</option>
</select></div>
<div class="form-group"><label>‡¶õ‡ßÅ‡¶ü‡¶ø‡¶∞ ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶ *</label>
<div class="leave-duration">
<label><input type="radio" name="leaveDuration" value="single" checked onchange="toggleDateFields()"><span>üìÖ ‡¶è‡¶ï‡¶¶‡¶ø‡¶®</span></label>
<label><input type="radio" name="leaveDuration" value="multiple" onchange="toggleDateFields()"><span>üìÜ ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶¶‡¶ø‡¶®</span></label>
</div></div>
<div id="singleDaySection"><div class="form-group"><label>‡¶õ‡ßÅ‡¶ü‡¶ø‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ *</label><input type="date" id="singleDate" required></div></div>
<div id="multipleDaySection" class="hidden">
<div class="date-group">
<div class="form-group"><label>‡¶∂‡ßÅ‡¶∞‡ßÅ *</label><input type="date" id="startDate"></div>
<div class="form-group"><label>‡¶∂‡ßá‡¶∑ *</label><input type="date" id="endDate"></div>
</div>
<div class="form-group"><label>‡¶Æ‡ßã‡¶ü ‡¶¶‡¶ø‡¶® *</label><input type="number" id="totalDays" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: 5" min="1"></div>
</div>
<div class="form-group"><label>‡¶õ‡ßÅ‡¶ü‡¶ø‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ *</label><textarea id="reason" rows="2" placeholder="‡¶ï) ‡¶™‡¶æ‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡¶ø‡¶ï ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞...‡¶ñ) ‡¶Ö‡¶∏‡ßÅ‡¶∏‡ßç‡¶•‡¶§‡¶æ‡¶∞" required></textarea></div>
<div class="form-group"><label>‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label><input type="text" id="schoolName" value="‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ ‡¶â‡¶ö‡ßç‡¶ö ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡¶Ø‡¶º"></div>
<div class="form-group"><label>‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá‡¶∞ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label><input type="text" id="schoolAddress" value="‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£, ‡¶ú‡ßá‡¶≤‡¶æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£"></div>
<div class="btn-group">
<button type="submit" class="btn-primary">üìÑ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
<button type="button" class="btn-reset" onclick="resetForm()">üîÑ</button>
</div>
<div class="saved-apps-section">
<h3>üìã ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®</h3>
<div class="app-counter" id="appCounter">‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü: ‡ß¶‡¶ü‡¶ø</div>
<button type="button" class="save-app-btn" onclick="saveCurrentApplication()">‚ûï ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
<div class="saved-apps-list" id="savedAppsList"><div class="no-saved-apps">‡¶ï‡ßã‡¶®‡ßã ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶®‡ßá‡¶á</div></div>
<div class="export-import-btns">
<button type="button" class="btn-export" onclick="exportAllApplications()">üì§ JSON ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
<button type="button" class="btn-import" onclick="document.getElementById('importFile').click()">üì• JSON ‡¶á‡¶Æ‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
<input type="file" id="importFile" accept=".json" style="display:none" onchange="importApplications(event)">
</div></div>
<div class="backup-section">
<h3>üíæ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™</h3>
<div class="backup-buttons">
<button type="button" class="btn-backup" onclick="saveBackup()">üíæ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™</button>
<button type="button" class="btn-restore" onclick="restoreBackup()">üì• ‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞</button>
<button type="button" class="btn-clear-backup" onclick="clearBackup()">üóëÔ∏è</button>
</div>
<div class="backup-status" id="backupStatus"></div>
</div>
</form>
</div>
<div class="output-card">
<div id="placeholder" class="placeholder"><div class="placeholder-icon">üìÑ</div><h3>‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶™‡¶§‡ßç‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â</h3><p>‡¶´‡¶∞‡ßç‡¶Æ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</p></div>
<div id="output" style="display:none">
<div class="output-header no-print"><h2>üìã ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â</h2><button class="btn-print" onclick="window.print()">üñ®Ô∏è ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü</button></div>
<div class="margin-control no-print"><label><span>üìè ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶®:</span><span class="margin-value" id="marginValue">20px</span></label><input type="range" class="margin-slider" id="marginSlider" min="5" max="60" value="20" oninput="updateMargin(this.value)"></div>
<div class="margin-control no-print"><label><span>üìù ‡¶≤‡¶æ‡¶á‡¶® ‡¶π‡¶æ‡¶á‡¶ü:</span><span class="lineheight-value" id="lineHeightValue">2.0</span></label><input type="range" class="lineheight-slider" id="lineHeightSlider" min="1.2" max="3" step="0.1" value="2" oninput="updateLineHeight(this.value)"></div>
<div class="margin-control no-print"><label><span>üî§ ‡¶´‡¶®‡ßç‡¶ü:</span><span class="fontsize-value" id="fontSizeValue">16px</span></label><input type="range" class="fontsize-slider" id="fontSizeSlider" min="10" max="24" value="16" oninput="updateFontSize(this.value)"></div>
<div class="application-letter" id="applicationLetter"></div>
</div></div></div>
<div class="footer">¬© 2024 ‡¶õ‡ßÅ‡¶ü‡¶ø‡¶∞ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶™‡¶§‡ßç‡¶∞ ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü‡¶∞</div>
<script>
function toggleDateFields(){const isSingle=document.querySelector('input[name="leaveDuration"]:checked').value==='single';document.getElementById('singleDaySection').classList.toggle('hidden',!isSingle);document.getElementById('multipleDaySection').classList.toggle('hidden',isSingle);document.getElementById('singleDate').required=isSingle;document.getElementById('startDate').required=!isSingle;document.getElementById('endDate').required=!isSingle;document.getElementById('totalDays').required=!isSingle}
function getBengaliDate(){return new Date().toLocaleDateString('bn-BD',{year:'numeric',month:'long',day:'numeric'})}
function formatDate(d){return d?new Date(d).toLocaleDateString('bn-BD'):''}
document.getElementById('leaveForm').addEventListener('submit',function(e){e.preventDefault();const isSingleDay=document.querySelector('input[name="leaveDuration"]:checked').value==='single';const data={applicantName:document.getElementById('applicantName').value,designation:document.getElementById('designation').value,department:document.getElementById('department').value,leaveType:document.getElementById('leaveType').value,isSingleDay,singleDate:formatDate(document.getElementById('singleDate').value),startDate:formatDate(document.getElementById('startDate').value),endDate:formatDate(document.getElementById('endDate').value),totalDays:document.getElementById('totalDays').value,reason:document.getElementById('reason').value,schoolName:document.getElementById('schoolName').value,schoolAddress:document.getElementById('schoolAddress').value,applicationDate:getBengaliDate()};const bengaliDigits=['‡ß¶','‡ßß','‡ß®','‡ß©','‡ß™','‡ß´','‡ß¨','‡ß≠','‡ßÆ','‡ßØ'];const totalDaysBengali=String(data.totalDays).replace(/[0-9]/g,d=>bengaliDigits[parseInt(d)]);const deptText=data.department?` (${data.department} ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó)`:'';const durationText=data.isSingleDay?`<stron>${data.singleDate}</stron> ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá ‡¶è‡¶ï‡¶¶‡¶ø‡¶®‡ßá‡¶∞ <stron>${data.leaveType}</stron> ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§`:`<stron>${data.startDate}</stron> ‡¶π‡¶§‡ßá <stron>${data.endDate}</stron> ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶Æ‡ßã‡¶ü <stron>${totalDaysBengali}</stron> ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ <stron>${data.leaveType}</stron> ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§`;document.getElementById('applicationLetter').innerHTML=`
<div class="letter-date">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ${data.applicationDate}</div>
<div style="margin-bottom:12px">‡¶¨‡¶∞‡¶æ‡¶¨‡¶∞,<br><stron>‡¶Ö‡¶ß‡ßç‡¶Ø‡¶ï‡ßç‡¶∑</stron><br>${data.schoolName}<br>${data.schoolAddress}</div>
<div class="letter-subject">‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º: <stron>${data.leaveType}</stron>‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡•§</div>
<div style="margin-bottom:12px">‡¶Æ‡¶π‡ßã‡¶¶‡¶Ø‡¶º,</div>
<div class="letter-body">‡¶¨‡¶ø‡¶®‡ßÄ‡¶§ ‡¶®‡¶ø‡¶¨‡ßá‡¶¶‡¶® ‡¶è‡¶á ‡¶Ø‡ßá, ‡¶Ü‡¶Æ‡¶ø <stron>${data.applicantName}</stron>, ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá‡¶∞ ‡¶è‡¶ï‡¶ú‡¶® <stron>${data.designation}</stron>${deptText} ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶ï‡¶∞‡ßç‡¶Æ‡¶∞‡¶§ ‡¶Ü‡¶õ‡¶ø‡•§ ‡¶Ü‡¶Æ‡¶æ‡¶∞ <stron>${data.reason}</stron> ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ${durationText}</div>
 <div class="letter-body">
                    ‡¶è‡¶á ‡¶Æ‡¶∞‡ßç‡¶Æ‡ßá ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ï‡¶ü ‡¶¨‡¶ø‡¶®‡ßÄ‡¶§‡¶≠‡¶æ‡¶¨‡ßá ‡¶â‡¶ï‡ßç‡¶§ <stron>${data.leaveType}</stron>‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ï‡¶∞‡¶õ‡¶ø‡•§ ‡¶Æ‡¶π‡ßã‡¶¶‡¶Ø‡¶º ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ï‡¶ü ‡¶¨‡¶ø‡¶®‡ßÄ‡¶§ ‡¶™‡ßç‡¶∞‡¶æ‡¶∞‡ßç‡¶•‡¶®‡¶æ, ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶Ö‡¶®‡ßÅ‡¶ï‡ßÇ‡¶≤‡ßá ‡¶¨‡¶ø‡¶¨‡ßá‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡ßá ‡¶¨‡¶æ‡¶ß‡¶ø‡¶§ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®‡•§
                </div>

                <div class="letter-body" style="margin-bottom: 30px;">
                    ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡¶æ‡¶®‡ßç‡¶§‡ßá,
                </div>

                <div class="letter-signature">
                    <div>‡¶¨‡¶ø‡¶®‡ßÄ‡¶§,</div>
                    <div style="margin-top: 40px;">
                        <stron>( ${data.applicantName} )</stron>
                    </div>
                    <div>${data.designation}</div>
                    ${data.department ? `<div>${data.department} ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó</div>` : ''}
                </div>

                <div class="office-use">
                    <div style="font-weight: 600; margin-bottom: 10px; color: #666;">
                        ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶æ‡¶≤‡¶Ø‡¶º ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø:
                    </div>
                    <div class="office-use-fields">
                        <div><span style="text-decoration: underline; text-underline-offset: 3px;">‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶®:</span> ___________________</div>
                        <div><span style="text-decoration: underline; text-underline-offset: 3px;">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</span> ___________________</div>
                        <div><span style="text-decoration: underline; text-underline-offset: 3px;">‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø:</span> ___________________</div>
                    </div>
                </div>
            `;

document.getElementById('placeholder').style.display='none';document.getElementById('output').style.display='block'});
function resetForm(){document.getElementById('leaveForm').reset();document.getElementById('schoolName').value='‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ ‡¶â‡¶ö‡ßç‡¶ö ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡¶Ø‡¶º';document.getElementById('schoolAddress').value='‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£, ‡¶ú‡ßá‡¶≤‡¶æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£';document.getElementById('placeholder').style.display='block';document.getElementById('output').style.display='none';toggleDateFields()}
function autoSaveFormData(){localStorage.setItem('leaveAppFormData',JSON.stringify({applicantName:document.getElementById('applicantName').value,designation:document.getElementById('designation').value,department:document.getElementById('department').value,leaveType:document.getElementById('leaveType').value,leaveDuration:document.querySelector('input[name="leaveDuration"]:checked').value,singleDate:document.getElementById('singleDate').value,startDate:document.getElementById('startDate').value,endDate:document.getElementById('endDate').value,totalDays:document.getElementById('totalDays').value,reason:document.getElementById('reason').value,schoolName:document.getElementById('schoolName').value,schoolAddress:document.getElementById('schoolAddress').value}))}
function autoRestoreFormData(){const d=JSON.parse(localStorage.getItem('leaveAppFormData')||'{}');if(d.applicantName!==undefined){document.getElementById('applicantName').value=d.applicantName||'';document.getElementById('designation').value=d.designation||'';document.getElementById('department').value=d.department||'';document.getElementById('leaveType').value=d.leaveType||'‡¶¨‡ßá‡¶§‡¶®‡¶π‡ßÄ‡¶® ‡¶õ‡ßÅ‡¶ü‡¶ø';document.getElementById('singleDate').value=d.singleDate||'';document.getElementById('startDate').value=d.startDate||'';document.getElementById('endDate').value=d.endDate||'';document.getElementById('totalDays').value=d.totalDays||'';document.getElementById('reason').value=d.reason||'';document.getElementById('schoolName').value=d.schoolName||'‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ ‡¶â‡¶ö‡ßç‡¶ö ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡¶Ø‡¶º';document.getElementById('schoolAddress').value=d.schoolAddress||'‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£, ‡¶ú‡ßá‡¶≤‡¶æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£';if(d.leaveDuration==='multiple'){document.querySelector('input[name="leaveDuration"][value="multiple"]').checked=true;toggleDateFields()}}}
document.querySelectorAll('input,select,textarea').forEach(el=>{el.addEventListener('input',autoSaveFormData);el.addEventListener('change',autoSaveFormData)});
function saveBackup(){localStorage.setItem('leaveAppBackup',JSON.stringify({applicantName:document.getElementById('applicantName').value,designation:document.getElementById('designation').value,department:document.getElementById('department').value,leaveType:document.getElementById('leaveType').value,leaveDuration:document.querySelector('input[name="leaveDuration"]:checked').value,singleDate:document.getElementById('singleDate').value,startDate:document.getElementById('startDate').value,endDate:document.getElementById('endDate').value,totalDays:document.getElementById('totalDays').value,reason:document.getElementById('reason').value,schoolName:document.getElementById('schoolName').value,schoolAddress:document.getElementById('schoolAddress').value,margin:document.getElementById('marginSlider').value,lineHeight:document.getElementById('lineHeightSlider').value,fontSize:document.getElementById('fontSizeSlider').value,backupDate:new Date().toLocaleString('bn-BD')}));showToast('‚úÖ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§!','success');updateBackupStatus()}
function restoreBackup(){const b=JSON.parse(localStorage.getItem('leaveAppBackup')||'null');if(b){document.getElementById('applicantName').value=b.applicantName||'';document.getElementById('designation').value=b.designation||'';document.getElementById('department').value=b.department||'';document.getElementById('leaveType').value=b.leaveType||'‡¶¨‡ßá‡¶§‡¶®‡¶π‡ßÄ‡¶® ‡¶õ‡ßÅ‡¶ü‡¶ø';document.getElementById('singleDate').value=b.singleDate||'';document.getElementById('startDate').value=b.startDate||'';document.getElementById('endDate').value=b.endDate||'';document.getElementById('totalDays').value=b.totalDays||'';document.getElementById('reason').value=b.reason||'';document.getElementById('schoolName').value=b.schoolName||'‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ ‡¶â‡¶ö‡ßç‡¶ö ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡¶Ø‡¶º';document.getElementById('schoolAddress').value=b.schoolAddress||'‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£, ‡¶ú‡ßá‡¶≤‡¶æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£';if(b.margin){document.getElementById('marginSlider').value=b.margin;updateMargin(b.margin)}if(b.lineHeight){document.getElementById('lineHeightSlider').value=b.lineHeight;updateLineHeight(b.lineHeight)}if(b.fontSize){document.getElementById('fontSizeSlider').value=b.fontSize;updateFontSize(b.fontSize)}if(b.leaveDuration==='multiple')document.querySelector('input[name="leaveDuration"][value="multiple"]').checked=true;else document.querySelector('input[name="leaveDuration"][value="single"]').checked=true;toggleDateFields();showToast('‚úÖ ‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!','success')}else showToast('‚ùå ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶®‡ßá‡¶á!','error')}
function clearBackup(){if(confirm('‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?')){localStorage.removeItem('leaveAppBackup');localStorage.removeItem('leaveAppFormData');updateBackupStatus();showToast('üóëÔ∏è ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!','success')}}
function updateBackupStatus(){const b=localStorage.getItem('leaveAppBackup');document.getElementById('backupStatus').innerHTML=b?`üì¶ ‡¶∂‡ßá‡¶∑ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™: ${JSON.parse(b).backupDate||'‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ'}`:'üì≠ ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶®‡ßá‡¶á'}
function showToast(msg,type){const t=document.createElement('div');t.className=`toast toast-${type}`;t.textContent=msg;document.body.appendChild(t);setTimeout(()=>t.remove(),3000)}
function renderSavedApplications(){const apps=JSON.parse(localStorage.getItem('savedApplications')||'[]');const list=document.getElementById('savedAppsList');document.getElementById('appCounter').textContent=`‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü: ${apps.length.toString().replace(/[0-9]/g,d=>'‡ß¶‡ßß‡ß®‡ß©‡ß™‡ß´‡ß¨‡ß≠‡ßÆ‡ßØ'[d])}‡¶ü‡¶ø`;if(!apps.length){list.innerHTML='<div class="no-saved-apps">‡¶ï‡ßã‡¶®‡ßã ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶®‡ßá‡¶á</div>';return}list.innerHTML=apps.map((a,i)=>`<div class="saved-app-item"><div class="saved-app-info"><div class="saved-app-name">${i+1}. ${a.applicantName}</div><div class="saved-app-date">${a.savedDate} | ${a.leaveType}</div></div><div class="saved-app-actions"><button class="btn-load-app" onclick="loadApplication(${a.id})">‡¶≤‡ßã‡¶°</button><button class="btn-delete-app" onclick="deleteApplication(${a.id})">‚úï</button></div></div>`).join('')}
function saveCurrentApplication(){const n=document.getElementById('applicantName').value;if(!n.trim()){showToast('‚ö†Ô∏è ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!','error');return}const app={id:Date.now(),applicantName:n,designation:document.getElementById('designation').value,department:document.getElementById('department').value,leaveType:document.getElementById('leaveType').value,leaveDuration:document.querySelector('input[name="leaveDuration"]:checked').value,singleDate:document.getElementById('singleDate').value,startDate:document.getElementById('startDate').value,endDate:document.getElementById('endDate').value,totalDays:document.getElementById('totalDays').value,reason:document.getElementById('reason').value,schoolName:document.getElementById('schoolName').value,schoolAddress:document.getElementById('schoolAddress').value,margin:document.getElementById('marginSlider').value,lineHeight:document.getElementById('lineHeightSlider').value,fontSize:document.getElementById('fontSizeSlider').value,savedDate:new Date().toLocaleString('bn-BD')};const apps=JSON.parse(localStorage.getItem('savedApplications')||'[]');apps.push(app);localStorage.setItem('savedApplications',JSON.stringify(apps));renderSavedApplications();showToast('‚úÖ ‡¶∏‡ßá‡¶≠ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!','success')}
function loadApplication(id){const app=JSON.parse(localStorage.getItem('savedApplications')||'[]').find(a=>a.id===id);if(app){document.getElementById('applicantName').value=app.applicantName||'';document.getElementById('designation').value=app.designation||'';document.getElementById('department').value=app.department||'';document.getElementById('leaveType').value=app.leaveType||'‡¶¨‡ßá‡¶§‡¶®‡¶π‡ßÄ‡¶® ‡¶õ‡ßÅ‡¶ü‡¶ø';document.getElementById('singleDate').value=app.singleDate||'';document.getElementById('startDate').value=app.startDate||'';document.getElementById('endDate').value=app.endDate||'';document.getElementById('totalDays').value=app.totalDays||'';document.getElementById('reason').value=app.reason||'';document.getElementById('schoolName').value=app.schoolName||'‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ ‡¶â‡¶ö‡ßç‡¶ö ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡¶Ø‡¶º';document.getElementById('schoolAddress').value=app.schoolAddress||'‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£, ‡¶ú‡ßá‡¶≤‡¶æ: ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£';if(app.margin){document.getElementById('marginSlider').value=app.margin;updateMargin(app.margin)}if(app.lineHeight){document.getElementById('lineHeightSlider').value=app.lineHeight;updateLineHeight(app.lineHeight)}if(app.fontSize){document.getElementById('fontSizeSlider').value=app.fontSize;updateFontSize(app.fontSize)}if(app.leaveDuration==='multiple')document.querySelector('input[name="leaveDuration"][value="multiple"]').checked=true;else document.querySelector('input[name="leaveDuration"][value="single"]').checked=true;toggleDateFields();showToast('‚úÖ ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!','success')}}
function deleteApplication(id){if(confirm('‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶¨‡ßá‡¶®?')){let apps=JSON.parse(localStorage.getItem('savedApplications')||'[]');apps=apps.filter(a=>a.id!==id);localStorage.setItem('savedApplications',JSON.stringify(apps));renderSavedApplications();showToast('üóëÔ∏è ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!','success')}}
function exportAllApplications(){const apps=JSON.parse(localStorage.getItem('savedApplications')||'[]');if(!apps.length){showToast('‚ö†Ô∏è ‡¶ï‡ßã‡¶®‡ßã ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶®‡ßá‡¶á!','error');return}const a=document.createElement('a');a.href=URL.createObjectURL(new Blob([JSON.stringify(apps,null,2)],{type:'application/json'}));a.download=`applications_${new Date().toISOString().slice(0,10)}.json`;a.click();showToast('üì§ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!','success')}
function importApplications(e){const f=e.target.files[0];if(!f)return;const r=new FileReader();r.onload=function(ev){try{const imported=JSON.parse(ev.target.result);if(!Array.isArray(imported)){showToast('‚ùå ‡¶Ö‡¶¨‡ßà‡¶ß JSON!','error');return}let apps=JSON.parse(localStorage.getItem('savedApplications')||'[]');imported.forEach(a=>{a.id=Date.now()+Math.random();a.savedDate=new Date().toLocaleString('bn-BD');apps.push(a)});localStorage.setItem('savedApplications',JSON.stringify(apps));renderSavedApplications();showToast(`‚úÖ ${imported.length.toString().replace(/[0-9]/g,d=>'‡ß¶‡ßß‡ß®‡ß©‡ß™‡ß´‡ß¨‡ß≠‡ßÆ‡ßØ'[d])}‡¶ü‡¶ø ‡¶á‡¶Æ‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü!`,'success')}catch(err){showToast('‚ùå JSON ‡¶™‡¶°‡¶º‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ!','error')}};r.readAsText(f);e.target.value=''}
function updateMargin(v){document.documentElement.style.setProperty('--margin-size',v+'px');document.getElementById('marginValue').textContent=v+'px'}
function updateLineHeight(v){document.documentElement.style.setProperty('--line-height',v);document.getElementById('lineHeightValue').textContent=parseFloat(v).toFixed(1)}
function updateFontSize(v){document.documentElement.style.setProperty('--font-size',v+'px');document.getElementById('fontSizeValue').textContent=v+'px'}
toggleDateFields();autoRestoreFormData();updateBackupStatus();renderSavedApplications();updateMargin(20);updateLineHeight(2);updateFontSize(16);
</script>
</body>
</html>
